<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>spring-cloud-Alibaba on GUAN-BLOG</title>
    <link>https://academia-hugo.netlify.com/notes/cloud-albaba/</link>
    <description>Recent content in spring-cloud-Alibaba on GUAN-BLOG</description>
    <generator>Source Themes academia (https://sourcethemes.com/academic/)</generator>
    <language>en-us</language>
    <lastBuildDate>Wed, 05 Aug 2020 00:00:00 +0000</lastBuildDate>
    
	    <atom:link href="https://academia-hugo.netlify.com/notes/cloud-albaba/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>sentinel</title>
      <link>https://academia-hugo.netlify.com/notes/cloud-albaba/sentinel/</link>
      <pubDate>Mon, 17 Aug 2020 00:00:00 +0000</pubDate>
      
      <guid>https://academia-hugo.netlify.com/notes/cloud-albaba/sentinel/</guid>
      <description>&lt;h1 id=&#34;介绍&#34;&gt;介绍&lt;/h1&gt;
&lt;p&gt;Eric Zhao edited this page on 11 Jun · &lt;a href=&#34;https://github.com/alibaba/Sentinel/wiki/%E4%BB%8B%E7%BB%8D/_history&#34;&gt;121 revisions&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://user-images.githubusercontent.com/9434884/43697219-3cb4ef3a-9975-11e8-9a9c-73f4f537442d.png&#34; alt=&#34;Sentinel Logo&#34;&gt;&lt;/p&gt;
&lt;h1 id=&#34;sentinel-分布式系统的流量防卫兵&#34;&gt;Sentinel: 分布式系统的流量防卫兵&lt;/h1&gt;
&lt;h2 id=&#34;sentinel-是什么&#34;&gt;Sentinel 是什么？&lt;/h2&gt;
&lt;p&gt;随着微服务的流行，服务和服务之间的稳定性变得越来越重要。Sentinel 以流量为切入点，从流量控制、熔断降级、系统负载保护等多个维度保护服务的稳定性。&lt;/p&gt;
&lt;p&gt;Sentinel 具有以下特征:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;丰富的应用场景&lt;/strong&gt;：Sentinel 承接了阿里巴巴近 10 年的双十一大促流量的核心场景，例如秒杀（即突发流量控制在系统容量可以承受的范围）、消息削峰填谷、集群流量控制、实时熔断下游不可用应用等。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;完备的实时监控&lt;/strong&gt;：Sentinel 同时提供实时的监控功能。您可以在控制台中看到接入应用的单台机器秒级数据，甚至 500 台以下规模的集群的汇总运行情况。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;广泛的开源生态&lt;/strong&gt;：Sentinel 提供开箱即用的与其它开源框架/库的整合模块，例如与 Spring Cloud、Dubbo、gRPC 的整合。您只需要引入相应的依赖并进行简单的配置即可快速地接入 Sentinel。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;完善的 SPI 扩展点&lt;/strong&gt;：Sentinel 提供简单易用、完善的 SPI 扩展接口。您可以通过实现扩展接口来快速地定制逻辑。例如定制规则管理、适配动态数据源等。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Sentinel 的主要特性：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://user-images.githubusercontent.com/9434884/50505538-2c484880-0aaf-11e9-9ffc-cbaaef20be2b.png&#34; alt=&#34;Sentinel-features-overview&#34;&gt;&lt;/p&gt;
&lt;p&gt;Sentinel 的开源生态：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://user-images.githubusercontent.com/9434884/84338449-a9497e00-abce-11ea-8c6a-473fe477b9a1.png&#34; alt=&#34;Sentinel-opensource-eco&#34;&gt;&lt;/p&gt;
&lt;p&gt;Sentinel 分为两个部分:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;核心库（Java 客户端）不依赖任何框架/库，能够运行于所有 Java 运行时环境，同时对 Dubbo / Spring Cloud 等框架也有较好的支持。&lt;/li&gt;
&lt;li&gt;控制台（Dashboard）基于 Spring Boot 开发，打包后可以直接运行，不需要额外的 Tomcat 等应用容器。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;quick-start&#34;&gt;Quick Start&lt;/h2&gt;
&lt;h3 id=&#34;11-公网-demo&#34;&gt;1.1 公网 Demo&lt;/h3&gt;
&lt;p&gt;如果希望最快的了解 Sentinel 在做什么，我们可以通过 &lt;a href=&#34;https://github.com/alibaba/Sentinel/wiki/%E6%96%B0%E6%89%8B%E6%8C%87%E5%8D%97#%E5%85%AC%E7%BD%91-demo&#34;&gt;Sentinel 新手指南&lt;/a&gt; 来运行一个例子，并且能在云上控制台上看到最直观的监控和流控效果等。&lt;/p&gt;
&lt;h3 id=&#34;12-手动接入-sentinel-以及控制台&#34;&gt;1.2 手动接入 Sentinel 以及控制台&lt;/h3&gt;
&lt;p&gt;下面的例子将展示应用如何三步接入 Sentinel。同时，Sentinel 也提供所见即所得的控制台，可以实时监控资源以及管理规则。&lt;/p&gt;
&lt;h4 id=&#34;step-1-在应用中引入sentinel-jar包&#34;&gt;STEP 1. 在应用中引入Sentinel Jar包&lt;/h4&gt;
&lt;p&gt;如果应用使用 pom 工程，则在 &lt;code&gt;pom.xml&lt;/code&gt; 文件中加入以下代码即可：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;com.alibaba.csp&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;sentinel-core&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;1.7.2&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;
&lt;p&gt;注意: 从 Sentinel 1.5.0 开始仅支持 JDK 1.7 或者以上版本。Sentinel 1.5.0 之前的版本最低支持 JDK 1.6。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;如果您未使用依赖管理工具，请到 &lt;a href=&#34;https://mvnrepository.com/artifact/com.alibaba.csp/sentinel-core&#34;&gt;Maven Center Repository&lt;/a&gt; 直接下载 JAR 包。&lt;/p&gt;
&lt;h4 id=&#34;step-2-定义资源&#34;&gt;STEP 2. 定义资源&lt;/h4&gt;
&lt;p&gt;接下来，我们把需要控制流量的代码用 Sentinel API &lt;code&gt;SphU.entry(&amp;quot;HelloWorld&amp;quot;)&lt;/code&gt; 和 &lt;code&gt;entry.exit()&lt;/code&gt; 包围起来即可。在下面的例子中，我们将 &lt;code&gt;System.out.println(&amp;quot;hello world&amp;quot;);&lt;/code&gt; 这端代码作为资源，用 API 包围起来（埋点）。参考代码如下:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;public static void main(String[] args) {
    initFlowRules();
    while (true) {
        Entry entry = null;
        try {
	    entry = SphU.entry(&amp;quot;HelloWorld&amp;quot;);
            /*您的业务逻辑 - 开始*/
            System.out.println(&amp;quot;hello world&amp;quot;);
            /*您的业务逻辑 - 结束*/
	} catch (BlockException e1) {
            /*流控逻辑处理 - 开始*/
	    System.out.println(&amp;quot;block!&amp;quot;);
            /*流控逻辑处理 - 结束*/
	} finally {
	   if (entry != null) {
	       entry.exit();
	   }
	}
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;完成以上两步后，代码端的改造就完成了。当然，我们也提供了 &lt;a href=&#34;https://github.com/alibaba/Sentinel/wiki/%E6%B3%A8%E8%A7%A3%E6%94%AF%E6%8C%81&#34;&gt;注解支持模块&lt;/a&gt;，可以以低侵入性的方式定义资源。&lt;/p&gt;
&lt;h4 id=&#34;step-3-定义规则&#34;&gt;STEP 3. 定义规则&lt;/h4&gt;
&lt;p&gt;接下来，通过规则来指定允许该资源通过的请求次数，例如下面的代码定义了资源 &lt;code&gt;HelloWorld&lt;/code&gt; 每秒最多只能通过 20 个请求。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;private static void initFlowRules(){
    List&amp;lt;FlowRule&amp;gt; rules = new ArrayList&amp;lt;&amp;gt;();
    FlowRule rule = new FlowRule();
    rule.setResource(&amp;quot;HelloWorld&amp;quot;);
    rule.setGrade(RuleConstant.FLOW_GRADE_QPS);
    // Set limit QPS to 20.
    rule.setCount(20);
    rules.add(rule);
    FlowRuleManager.loadRules(rules);
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;完成上面 3 步，Sentinel 就能够正常工作了。更多的信息可以参考 &lt;a href=&#34;https://github.com/alibaba/Sentinel/wiki/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8&#34;&gt;使用文档&lt;/a&gt;。&lt;/p&gt;
&lt;h4 id=&#34;step-4-检查效果&#34;&gt;STEP 4. 检查效果&lt;/h4&gt;
&lt;p&gt;Demo 运行之后，我们可以在日志 &lt;code&gt;~/logs/csp/${appName}-metrics.log.xxx&lt;/code&gt; 里看到下面的输出:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;|--timestamp-|------date time----|-resource-|p |block|s |e|rt
1529998904000|2018-06-26 15:41:44|HelloWorld|20|0    |20|0|0
1529998905000|2018-06-26 15:41:45|HelloWorld|20|5579 |20|0|728
1529998906000|2018-06-26 15:41:46|HelloWorld|20|15698|20|0|0
1529998907000|2018-06-26 15:41:47|HelloWorld|20|19262|20|0|0
1529998908000|2018-06-26 15:41:48|HelloWorld|20|19502|20|0|0
1529998909000|2018-06-26 15:41:49|HelloWorld|20|18386|20|0|0
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;其中 &lt;code&gt;p&lt;/code&gt; 代表通过的请求, &lt;code&gt;block&lt;/code&gt; 代表被阻止的请求, &lt;code&gt;s&lt;/code&gt; 代表成功执行完成的请求个数, &lt;code&gt;e&lt;/code&gt; 代表用户自定义的异常, &lt;code&gt;rt&lt;/code&gt; 代表平均响应时长。&lt;/p&gt;
&lt;p&gt;可以看到，这个程序每秒稳定输出 &amp;ldquo;hello world&amp;rdquo; 20 次，和规则中预先设定的阈值是一样的。&lt;/p&gt;
&lt;p&gt;更详细的说明可以参考: &lt;a href=&#34;https://github.com/alibaba/Sentinel/wiki/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8&#34;&gt;如何使用&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;更多的例子可以参考: &lt;a href=&#34;https://github.com/alibaba/Sentinel/tree/master/sentinel-demo&#34;&gt;Sentinel Examples&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&#34;step-5-启动-sentinel-控制台&#34;&gt;STEP 5. 启动 Sentinel 控制台&lt;/h4&gt;
&lt;p&gt;您可以参考 &lt;a href=&#34;https://github.com/alibaba/Sentinel/wiki/%E6%8E%A7%E5%88%B6%E5%8F%B0&#34;&gt;Sentinel 控制台文档&lt;/a&gt; 启动控制台，可以实时监控各个资源的运行情况，并且可以实时地修改限流规则。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://user-images.githubusercontent.com/9434884/50678855-aa6e9700-103b-11e9-83de-2a33e580325f.png&#34; alt=&#34;dashboard-monitoring&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;详细文档&#34;&gt;详细文档&lt;/h2&gt;
&lt;p&gt;请移步 &lt;a href=&#34;https://github.com/alibaba/Sentinel/wiki/%E4%B8%BB%E9%A1%B5&#34;&gt;Wiki&lt;/a&gt;，查阅详细的文档、示例以及&lt;a href=&#34;https://github.com/alibaba/Sentinel/wiki/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8&#34;&gt;使用说明&lt;/a&gt;。若您希望从其它熔断降级组件（如 Hystrix）迁移或进行功能对比，可以参考 &lt;a href=&#34;https://github.com/alibaba/Sentinel/wiki/Guideline:-%E4%BB%8E-Hystrix-%E8%BF%81%E7%A7%BB%E5%88%B0-Sentinel&#34;&gt;迁移指南&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;Please refer to &lt;a href=&#34;https://github.com/alibaba/Sentinel&#34;&gt;README&lt;/a&gt; for README in English。&lt;/p&gt;
&lt;p&gt;与 Sentinel 相关的生态（包括社区用户实现的扩展、整合、示例以及文章）可以参见 &lt;a href=&#34;https://github.com/alibaba/Sentinel/blob/master/doc/awesome-sentinel.md&#34;&gt;Awesome Sentinel&lt;/a&gt;，欢迎补充！&lt;/p&gt;
&lt;p&gt;如果您正在使用 Sentinel，欢迎在 &lt;a href=&#34;https://github.com/alibaba/Sentinel/issues/18&#34;&gt;Wanted: Who is using Sentinel&lt;/a&gt; 留言告诉我们您的使用场景，以便我们更好地去改进。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Nacos配置中心</title>
      <link>https://academia-hugo.netlify.com/notes/cloud-albaba/%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83/</link>
      <pubDate>Mon, 17 Aug 2020 00:00:00 +0100</pubDate>
      
      <guid>https://academia-hugo.netlify.com/notes/cloud-albaba/%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83/</guid>
      <description>&lt;h2 id=&#34;新建项目&#34;&gt;新建项目&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;cloudalibaba-config-nacos-client3377&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&#34;pom&#34;&gt;pom&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;com.alibaba.cloud&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-cloud-starter-alibaba-nacos-config&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;公式&#34;&gt;公式&lt;/h2&gt;
&lt;p&gt;${spring.application.name}-${spring.profile.active}.${spring.cloud.nacos.config.file-extension}
&lt;img src=&#34;https://academia-hugo.netlify.com/img/cloudAlibaba/2.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;添加配置&#34;&gt;添加配置&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://academia-hugo.netlify.com/img/cloudAlibaba/3.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;yml&#34;&gt;yml&lt;/h2&gt;
&lt;p&gt;bootstrap.yml&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;server:
  port: 3377
spring:
  application:
    name: nacos-config-client
  cloud:
    nacos:
      discovery:
        server-addr: localhost:8848 
      config:
        server-addr: localhost:8848 
        file-extension: yml 

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;application.yml&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;spring:
  profiles:
    active: dev 
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;controller&#34;&gt;controller&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; com.nacos.config.controller&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;

&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.springframework.beans.factory.annotation.Value&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.springframework.cloud.context.config.annotation.RefreshScope&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.springframework.web.bind.annotation.GetMapping&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.springframework.web.bind.annotation.RestController&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; *
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @author yzg
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @version 1.0
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @create 2020/08/17
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; */&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;@RestController&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;@RefreshScope&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;// 支持nacos的动态刷新
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ConfigClientController&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;@Value&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;${config.info}&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; String configInfo&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;

    &lt;span style=&#34;color:#a6e22e&#34;&gt;@GetMapping&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/config/info&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; String &lt;span style=&#34;color:#a6e22e&#34;&gt;getConfigInfo&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(){&lt;/span&gt;
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; configInfo&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;


&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;启动类&#34;&gt;启动类&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; com.nacos.config&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;

&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.springframework.boot.SpringApplication&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.springframework.boot.autoconfigure.SpringBootApplication&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.springframework.cloud.client.discovery.EnableDiscoveryClient&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;

&lt;span style=&#34;color:#a6e22e&#34;&gt;@SpringBootApplication&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;@EnableDiscoveryClient&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NacosConfigCilent3377&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;String&lt;span style=&#34;color:#f92672&#34;&gt;[]&lt;/span&gt; args&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;
        SpringApplication&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;run&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;NacosConfigCilent3377&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;class&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt; args&lt;span style=&#34;color:#f92672&#34;&gt;);&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;



&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;测试&#34;&gt;测试&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://academia-hugo.netlify.com/img/cloudAlibaba/4.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>SentinelResource注解</title>
      <link>https://academia-hugo.netlify.com/notes/cloud-albaba/sentinelresource/</link>
      <pubDate>Mon, 17 Aug 2020 00:00:00 +0100</pubDate>
      
      <guid>https://academia-hugo.netlify.com/notes/cloud-albaba/sentinelresource/</guid>
      <description>&lt;h2 id=&#34;按资源名称限流&#34;&gt;按资源名称限流&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;@GetMapping&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/byResource&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;@SentinelResource&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;value &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;byResource&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt; blockHandler &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;handleException&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; CommomResult &lt;span style=&#34;color:#a6e22e&#34;&gt;byResource&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(){&lt;/span&gt;
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; CommomResult&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;200&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;按资源名称限流测试OK&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; Payment&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;2020L&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;serial001&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;));&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;

    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; CommomResult &lt;span style=&#34;color:#a6e22e&#34;&gt;handleException&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;BlockException blockException&lt;span style=&#34;color:#f92672&#34;&gt;){&lt;/span&gt;
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; CommomResult&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&amp;gt;(&lt;/span&gt;444&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt; blockException&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;getClass&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;().&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;getCanonicalName&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;()+&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\t服务不可用&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;);&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;测试&#34;&gt;测试&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;配置1&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://academia-hugo.netlify.com/img/cloudAlibaba/24.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://academia-hugo.netlify.com/img/cloudAlibaba/25.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;配置2&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://academia-hugo.netlify.com/img/cloudAlibaba/26.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://academia-hugo.netlify.com/img/cloudAlibaba/27.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>SentinelResource注解代码解耦</title>
      <link>https://academia-hugo.netlify.com/notes/cloud-albaba/sentinelresource%E4%BB%A3%E7%A0%81%E8%A7%A3%E8%80%A6/</link>
      <pubDate>Mon, 17 Aug 2020 00:00:00 +0100</pubDate>
      
      <guid>https://academia-hugo.netlify.com/notes/cloud-albaba/sentinelresource%E4%BB%A3%E7%A0%81%E8%A7%A3%E8%80%A6/</guid>
      <description>&lt;h2 id=&#34;优化代码&#34;&gt;优化代码&lt;/h2&gt;
&lt;p&gt;blockHandlerClass  ：兜底类&lt;br&gt;
blockHandler：兜底方法&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;@GetMapping&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/rateLimit/customerBlockHandler&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;@SentinelResource&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;value &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;customerBlockHandler&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt;
                    blockHandlerClass &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; CustomerBlockHandler&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;class&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt; blockHandler &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;handlerException2&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; CommomResult &lt;span style=&#34;color:#a6e22e&#34;&gt;customerBlockHandler&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(){&lt;/span&gt;
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; CommomResult&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;200&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;客户自定义 限流测试OK&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; Payment&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;2020L&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;serial001&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;));&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;CustomerBlockHandler.java&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; com.sentinel.myhandler&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;

&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; com.alibaba.csp.sentinel.slots.block.BlockException&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;

&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; cloud.api.common.entities.CommomResult&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; *
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @author yzg
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @version 1.0
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @create 2020/08/20
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; */&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CustomerBlockHandler&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;

    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; CommomResult &lt;span style=&#34;color:#a6e22e&#34;&gt;handlerException&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;BlockException exception&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; CommomResult&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;444&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;客户自定义，global handlerException---1&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;);&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;

    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; CommomResult &lt;span style=&#34;color:#a6e22e&#34;&gt;handlerException2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;BlockException exception&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; CommomResult&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;444&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;客户自定义，global handlerException---2&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;);&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;配置&#34;&gt;配置&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://academia-hugo.netlify.com/img/cloudAlibaba/28.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;测试&#34;&gt;测试&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://academia-hugo.netlify.com/img/cloudAlibaba/29.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>sentinel安装</title>
      <link>https://academia-hugo.netlify.com/notes/cloud-albaba/sentinel%E5%AE%89%E8%A3%85/</link>
      <pubDate>Mon, 17 Aug 2020 00:00:00 +0100</pubDate>
      
      <guid>https://academia-hugo.netlify.com/notes/cloud-albaba/sentinel%E5%AE%89%E8%A3%85/</guid>
      <description>&lt;h2 id=&#34;下载jar&#34;&gt;下载jar&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/alibaba/Sentinel/releases/tag/1.7.2&#34;&gt;https://github.com/alibaba/Sentinel/releases/tag/1.7.2&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;运行&#34;&gt;运行&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;java -Dserver.port=:8858 -Dcsp.sentinel.dashboard.server=localhost:8080 -Dproject.name=sentinel-dashboard -jar sentinel-dashboard.jar
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;测试访问&#34;&gt;测试访问&lt;/h2&gt;
&lt;p&gt;直接访问 &lt;a href=&#34;http://127.0.0.1:8858&#34;&gt;http://127.0.0.1:8858&lt;/a&gt;&lt;br&gt;
使用账号：sentinel，密码：sentinel  登录&lt;br&gt;
&lt;img src=&#34;https://academia-hugo.netlify.com/img/cloudAlibaba/5.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>sentinel持久化配置</title>
      <link>https://academia-hugo.netlify.com/notes/cloud-albaba/sentinel%E6%8C%81%E4%B9%85%E5%8C%96%E9%85%8D%E7%BD%AE/</link>
      <pubDate>Mon, 17 Aug 2020 00:00:00 +0100</pubDate>
      
      <guid>https://academia-hugo.netlify.com/notes/cloud-albaba/sentinel%E6%8C%81%E4%B9%85%E5%8C%96%E9%85%8D%E7%BD%AE/</guid>
      <description>&lt;p&gt;官网教程地址：https://github.com/alibaba/spring-cloud-alibaba/wiki/Sentinel&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://academia-hugo.netlify.com/img/cloudAlibaba/30.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;改造项目&#34;&gt;改造项目&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;cloudalibaba-sentinel-service8401&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&#34;pom&#34;&gt;pom&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
			&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;com.alibaba.csp&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
			&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;sentinel-datasource-nacos&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
		&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;yml&#34;&gt;yml&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;    sentinel:
      transport:
        # sentinel dashboard 地址
        dashboard: 192.168.126.128:8858
        # 默认为8719，如果被占用会自动+1，直到找到为止
        port: 8719
      # 流控规则持久化到nacos
      datasource:
        dsl:
          nacos:
            server-addr: 192.168.126.128:88488
            data-id: ${spring.application.name}
            group-id: DEFAULT_GROUP
            data-type: json
            rule-type: flow
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;配置&#34;&gt;配置&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://academia-hugo.netlify.com/img/cloudAlibaba/29.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;[
    {
        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;resource&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/testA&amp;#34;&lt;/span&gt;,
        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;count&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,
        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;grade&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,
        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;limitApp&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;default&amp;#34;&lt;/span&gt;,
        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;strategy&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,
        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;controlBehavior&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
    }
]

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;resource : 资源名称&lt;br&gt;
limitApp：来源应用&lt;br&gt;
grade：阈值类型，0表示线程数，1表示QPS&lt;br&gt;
count :  单机阈值
strategy：流控模式，0直接，1关联，2链路
controlBehavior：流控效果，0快速失败，1warm up .2排队等待
clusterMode:是否集群&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>sentinel整合nacos&#43;openfegin</title>
      <link>https://academia-hugo.netlify.com/notes/cloud-albaba/sentinel%E6%95%B4%E5%90%88nacos&#43;openfegin/</link>
      <pubDate>Mon, 17 Aug 2020 00:00:00 +0100</pubDate>
      
      <guid>https://academia-hugo.netlify.com/notes/cloud-albaba/sentinel%E6%95%B4%E5%90%88nacos&#43;openfegin/</guid>
      <description>&lt;h2 id=&#34;架构&#34;&gt;架构&lt;/h2&gt;
&lt;p&gt;提供者&lt;br&gt;
&lt;code&gt;cloudalibaba-provider-payment9003&lt;/code&gt;&lt;br&gt;
&lt;code&gt;cloudalibaba-provider-payment9004&lt;/code&gt;&lt;br&gt;
消费者&lt;br&gt;
&lt;code&gt;cloudalibaba-consumer-nacos-order8004 &lt;/code&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>sentinel服务监控</title>
      <link>https://academia-hugo.netlify.com/notes/cloud-albaba/sentinel%E6%9C%8D%E5%8A%A1%E7%9B%91%E6%8E%A7/</link>
      <pubDate>Mon, 17 Aug 2020 00:00:00 +0100</pubDate>
      
      <guid>https://academia-hugo.netlify.com/notes/cloud-albaba/sentinel%E6%9C%8D%E5%8A%A1%E7%9B%91%E6%8E%A7/</guid>
      <description>&lt;h2 id=&#34;新建项目&#34;&gt;新建项目&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;cloudalibaba-sentinel-service8401&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&#34;pom&#34;&gt;pom&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;com.alibaba.cloud&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
       
        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;com.alibaba.cloud&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-cloud-starter-alibaba-sentinel&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;yml&#34;&gt;yml&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;server:
  port: 8401
spring:
  application:
    name: cloudalibaba-sentinel-service
  cloud:
    nacos:
      discovery:
        # Nacos服务注册中心地址
        server-addr: localhost:8848
    sentinel:
      transport:
        # sentinel dashboard 地址
        dashboard: localhost:8080
        # 默认为8719，如果被占用会自动+1，直到找到为止
        port: 8719
management:
  endpoints:
    web:
      exposure:
        include: &amp;quot;*&amp;quot;        
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;controller&#34;&gt;controller&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; com.sentinel.controller&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;

&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.springframework.web.bind.annotation.GetMapping&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.springframework.web.bind.annotation.RestController&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;

&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; lombok.extern.slf4j.Slf4j&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; *
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @author yzg
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @version 1.0
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @create 2020/08/17
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; */&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;@RestController&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;@Slf4j&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;FlowLimitController&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;

    &lt;span style=&#34;color:#a6e22e&#34;&gt;@GetMapping&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/testA&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; String &lt;span style=&#34;color:#a6e22e&#34;&gt;testA&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(){&lt;/span&gt;
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;testA-----&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;

    &lt;span style=&#34;color:#a6e22e&#34;&gt;@GetMapping&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/testB&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; String &lt;span style=&#34;color:#a6e22e&#34;&gt;testB&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(){&lt;/span&gt;
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;testB   -----&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;

&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;


&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;启动类&#34;&gt;启动类&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; com.sentinel&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;

&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.springframework.boot.SpringApplication&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.springframework.boot.autoconfigure.SpringBootApplication&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.springframework.cloud.client.discovery.EnableDiscoveryClient&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @author yzg
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; */&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;@SpringBootApplication&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;@EnableDiscoveryClient&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;MainApp8401&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;String&lt;span style=&#34;color:#f92672&#34;&gt;[]&lt;/span&gt; args&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;
        SpringApplication&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;run&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;MainApp8401&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;class&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt; args&lt;span style=&#34;color:#f92672&#34;&gt;);&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;测试&#34;&gt;测试&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://academia-hugo.netlify.com/img/cloudAlibaba/6.jpg&#34; alt=&#34;&#34;&gt;&lt;br&gt;
访问&lt;a href=&#34;http://localhost:8401//testA&#34;&gt;http://localhost:8401//testA&lt;/a&gt;&lt;br&gt;
sentinel是懒加载，服务需要访问一次才能被sentinel监控
&lt;img src=&#34;https://academia-hugo.netlify.com/img/cloudAlibaba/7.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>sentinel流控-QPS直接失败</title>
      <link>https://academia-hugo.netlify.com/notes/cloud-albaba/sentinel%E6%B5%81%E6%8E%A7-qps%E7%9B%B4%E6%8E%A5%E5%A4%B1%E8%B4%A5/</link>
      <pubDate>Mon, 17 Aug 2020 00:00:00 +0100</pubDate>
      
      <guid>https://academia-hugo.netlify.com/notes/cloud-albaba/sentinel%E6%B5%81%E6%8E%A7-qps%E7%9B%B4%E6%8E%A5%E5%A4%B1%E8%B4%A5/</guid>
      <description>&lt;p&gt;官网 &lt;a href=&#34;https://github.com/alibaba/Sentinel/wiki/Flow-Control#flow-control-by-threadqps&#34;&gt;https://github.com/alibaba/Sentinel/wiki/Flow-Control#flow-control-by-threadqps&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;新增流控规则&#34;&gt;新增流控规则&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://academia-hugo.netlify.com/img/cloudAlibaba/8.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;测试&#34;&gt;测试&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://academia-hugo.netlify.com/img/cloudAlibaba/9.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>sentinel流控-线程直接失败</title>
      <link>https://academia-hugo.netlify.com/notes/cloud-albaba/sentinel%E6%B5%81%E6%8E%A7-%E7%BA%BF%E7%A8%8B%E7%9B%B4%E6%8E%A5%E5%A4%B1%E8%B4%A5/</link>
      <pubDate>Mon, 17 Aug 2020 00:00:00 +0100</pubDate>
      
      <guid>https://academia-hugo.netlify.com/notes/cloud-albaba/sentinel%E6%B5%81%E6%8E%A7-%E7%BA%BF%E7%A8%8B%E7%9B%B4%E6%8E%A5%E5%A4%B1%E8%B4%A5/</guid>
      <description>&lt;p&gt;官网 &lt;a href=&#34;https://github.com/alibaba/Sentinel/wiki/Flow-Control#flow-control-by-threadqps&#34;&gt;https://github.com/alibaba/Sentinel/wiki/Flow-Control#flow-control-by-threadqps&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;qps和线程&#34;&gt;QPS和线程&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://academia-hugo.netlify.com/img/cloudAlibaba/10.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>sentinel流控-预热</title>
      <link>https://academia-hugo.netlify.com/notes/cloud-albaba/sentinel%E6%B5%81%E6%8E%A7-%E9%A2%84%E7%83%AD/</link>
      <pubDate>Mon, 17 Aug 2020 00:00:00 +0100</pubDate>
      
      <guid>https://academia-hugo.netlify.com/notes/cloud-albaba/sentinel%E6%B5%81%E6%8E%A7-%E9%A2%84%E7%83%AD/</guid>
      <description>&lt;p&gt;官网 [https://github.com/alibaba/Sentinel/wiki/%E9%99%90%E6%B5%81&amp;mdash;%E5%86%B7%E5%90%AF%E5%8A%A8](&lt;a href=&#34;https://github.com/alibaba/Sentinel/wiki/%E9%99%90%E6%B5%81---%E5%86%B7%E5%90%AF%E5%8A%A8&#34;&gt;https://github.com/alibaba/Sentinel/wiki/%E9%99%90%E6%B5%81---%E5%86%B7%E5%90%AF%E5%8A%A8&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;预热&#34;&gt;预热&lt;/h2&gt;
&lt;p&gt;预热（RuleConstant.CONTROL_BEHAVIOR_WARM_UP）
如果系统的使用率一段时间以来一直很低，但是突然有大量请求进入，则系统可能无法立即处理  所  有这些请求。但是，如果我们稳步增加传入的请求并允许系统预热，则它最终可能能够处理所  有请求&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;默认 &lt;code&gt;coldFactor&lt;/code&gt; 为 3，即请求 QPS 从 &lt;code&gt;threshold / 3&lt;/code&gt; 开始，经预热时长逐渐升至设定的 QPS 阈值&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&#34;配置&#34;&gt;配置&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://academia-hugo.netlify.com/img/cloudAlibaba/12.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;测试&#34;&gt;测试&lt;/h2&gt;
&lt;p&gt;初始化阈值为&lt;code&gt;10 / 3 = 3&lt;/code&gt;  , QPS 阈值 进过`5``秒后逐渐升至10&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://academia-hugo.netlify.com/img/cloudAlibaba/1.gif&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>sentinel系统规则</title>
      <link>https://academia-hugo.netlify.com/notes/cloud-albaba/sentinel%E7%B3%BB%E7%BB%9F%E8%A7%84%E5%88%99/</link>
      <pubDate>Mon, 17 Aug 2020 00:00:00 +0100</pubDate>
      
      <guid>https://academia-hugo.netlify.com/notes/cloud-albaba/sentinel%E7%B3%BB%E7%BB%9F%E8%A7%84%E5%88%99/</guid>
      <description>&lt;p&gt;官网 :&lt;a href=&#34;https://github.com/alibaba/Sentinel/wiki/%E7%B3%BB%E7%BB%9F%E8%87%AA%E9%80%82%E5%BA%94%E9%99%90%E6%B5%81&#34;&gt;https://github.com/alibaba/Sentinel/wiki/%E7%B3%BB%E7%BB%9F%E8%87%AA%E9%80%82%E5%BA%94%E9%99%90%E6%B5%81&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>sentinel降级</title>
      <link>https://academia-hugo.netlify.com/notes/cloud-albaba/sentinel%E9%99%8D%E7%BA%A7/</link>
      <pubDate>Mon, 17 Aug 2020 00:00:00 +0100</pubDate>
      
      <guid>https://academia-hugo.netlify.com/notes/cloud-albaba/sentinel%E9%99%8D%E7%BA%A7/</guid>
      <description>&lt;p&gt;官网 :&lt;a href=&#34;https://github.com/alibaba/Sentinel/wiki/%E7%86%94%E6%96%AD%E9%99%8D%E7%BA%A7&#34;&gt;https://github.com/alibaba/Sentinel/wiki/%E7%86%94%E6%96%AD%E9%99%8D%E7%BA%A7&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;rt模式&#34;&gt;RT模式&lt;/h2&gt;
&lt;h3 id=&#34;配置&#34;&gt;配置&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;https://academia-hugo.netlify.com/img/cloudAlibaba/13.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;一秒钟10个进程（大于5个） 调用testB,我们希望200毫秒处理完本次任务，如果20毫秒没处理完，在未来的3秒时间窗口内，断路器打开&lt;/p&gt;
&lt;p&gt;让服务器响应1秒&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;@GetMapping&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/testB&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; String &lt;span style=&#34;color:#a6e22e&#34;&gt;testB&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(){&lt;/span&gt;
      &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;
      TimeUnit&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;SECONDS&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sleep&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;1&lt;span style=&#34;color:#f92672&#34;&gt;);&lt;/span&gt;
  &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;catch&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;InterruptedException e&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;
      e&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;printStackTrace&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;();&lt;/span&gt;
  &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;testB   -----&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://academia-hugo.netlify.com/img/cloudAlibaba/14.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;测试&#34;&gt;测试&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;https://academia-hugo.netlify.com/img/cloudAlibaba/2.gif&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;异常比例&#34;&gt;异常比例&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://academia-hugo.netlify.com/img/cloudAlibaba/15.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;触发条件&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;每秒请求数大于5&lt;/li&gt;
&lt;li&gt;.异常比例大于0.2&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;异常数&#34;&gt;异常数&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://academia-hugo.netlify.com/img/cloudAlibaba/16.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>sentine热点参数限流</title>
      <link>https://academia-hugo.netlify.com/notes/cloud-albaba/sentine%E7%83%AD%E7%82%B9%E5%8F%82%E6%95%B0%E9%99%90%E6%B5%81/</link>
      <pubDate>Mon, 17 Aug 2020 00:00:00 +0100</pubDate>
      
      <guid>https://academia-hugo.netlify.com/notes/cloud-albaba/sentine%E7%83%AD%E7%82%B9%E5%8F%82%E6%95%B0%E9%99%90%E6%B5%81/</guid>
      <description>&lt;p&gt;官网 :&lt;a href=&#34;https://github.com/alibaba/Sentinel/wiki/%E7%83%AD%E7%82%B9%E5%8F%82%E6%95%B0%E9%99%90%E6%B5%81&#34;&gt;https://github.com/alibaba/Sentinel/wiki/%E7%83%AD%E7%82%B9%E5%8F%82%E6%95%B0%E9%99%90%E6%B5%81&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;配置&#34;&gt;配置&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//热点限流
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;@GetMapping&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/testHotKey&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;@SentinelResource&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;value &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;testHotKey&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt; blockHandler &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;dealTestHotKey&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; String &lt;span style=&#34;color:#a6e22e&#34;&gt;testHotKey&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;@RequestParam&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;value &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;p1&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt; required &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; String p1&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt;
                             &lt;span style=&#34;color:#a6e22e&#34;&gt;@RequestParam&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;value &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;p2&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt; required &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; String p2&lt;span style=&#34;color:#f92672&#34;&gt;){&lt;/span&gt;
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;testHotKey -----&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;

    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; String &lt;span style=&#34;color:#a6e22e&#34;&gt;dealTestHotKey&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;String p1&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt; String p2&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt; BlockException blockException&lt;span style=&#34;color:#f92672&#34;&gt;){&lt;/span&gt;
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;deal TestHotKey------QAQ-&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://academia-hugo.netlify.com/img/cloudAlibaba/17.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;测试&#34;&gt;测试&lt;/h2&gt;
&lt;p&gt;访问http://localhost:8401/testHotKey&lt;br&gt;
&lt;img src=&#34;https://academia-hugo.netlify.com/img/cloudAlibaba/18.jpg&#34; alt=&#34;&#34;&gt;&lt;br&gt;
访问http://localhost:8401/testHotKey?p1=a&lt;br&gt;
&lt;img src=&#34;https://academia-hugo.netlify.com/img/cloudAlibaba/19.jpg&#34; alt=&#34;&#34;&gt;&lt;br&gt;
访问http://localhost:8401/testHotKey?p2=a&lt;br&gt;
&lt;img src=&#34;https://academia-hugo.netlify.com/img/cloudAlibaba/20.jpg&#34; alt=&#34;&#34;&gt;&lt;br&gt;
访问http://localhost:8401/testHotKey?p2=a&amp;amp;p1=a&lt;br&gt;
&lt;img src=&#34;https://academia-hugo.netlify.com/img/cloudAlibaba/21.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;参数例外项&#34;&gt;参数例外项&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://academia-hugo.netlify.com/img/cloudAlibaba/22.jpg&#34; alt=&#34;&#34;&gt;&lt;br&gt;
访问http://localhost:8401/testHotKey?p1=5
&lt;img src=&#34;https://academia-hugo.netlify.com/img/cloudAlibaba/23.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Nacos服务消费者注册和负载</title>
      <link>https://academia-hugo.netlify.com/notes/cloud-albaba/%E6%9C%8D%E5%8A%A1%E6%B6%88%E8%B4%B9%E8%80%85%E6%B3%A8%E5%86%8C%E5%92%8C%E8%B4%9F%E8%BD%BD/</link>
      <pubDate>Mon, 10 Aug 2020 00:00:00 +0100</pubDate>
      
      <guid>https://academia-hugo.netlify.com/notes/cloud-albaba/%E6%9C%8D%E5%8A%A1%E6%B6%88%E8%B4%B9%E8%80%85%E6%B3%A8%E5%86%8C%E5%92%8C%E8%B4%9F%E8%BD%BD/</guid>
      <description>&lt;h2 id=&#34;新建项目&#34;&gt;新建项目&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;cloudalibaba-consumer-nacos-order8013&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&#34;pom&#34;&gt;pom&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;com.alibaba.cloud&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;yml&#34;&gt;yml&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;server:
  port: 8013

spring:
  application:
    name: nacos-order-consumer
  cloud:
    nacos:
      discovery:
        server-addr: localhost:8848

#消费者将要去访问的微服务名称（注册成功进nacos的微服务提供者）
service-url:
  nacos-user-service: http://nacos-payment-provider
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;config&#34;&gt;Config&lt;/h2&gt;
&lt;p&gt;nacos自带了负载均衡，所以需要加上@LoadBalanced注解&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; com.cloud.provider.comsumer.config&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;

&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.springframework.cloud.client.loadbalancer.LoadBalanced&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.springframework.context.annotation.Bean&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.springframework.context.annotation.Configuration&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.springframework.web.client.RestTemplate&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; *
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @author yzg
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @version 1.0
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @create 2020/08/10
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; */&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;@Configuration&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ApplicationContextConfig&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;

    &lt;span style=&#34;color:#a6e22e&#34;&gt;@Bean&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;@LoadBalanced&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; RestTemplate &lt;span style=&#34;color:#a6e22e&#34;&gt;getRestTemplate&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(){&lt;/span&gt;
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; RestTemplate&lt;span style=&#34;color:#f92672&#34;&gt;();&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;controller&#34;&gt;controller&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; com.cloud.provider.comsumer.controller&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;

&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; lombok.extern.slf4j.Slf4j&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.springframework.beans.factory.annotation.Value&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.springframework.web.bind.annotation.GetMapping&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.springframework.web.bind.annotation.PathVariable&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.springframework.web.bind.annotation.RestController&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.springframework.web.client.RestTemplate&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;

&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; javax.annotation.Resource&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; *
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @author yzg
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @version 1.0
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @create 2020/08/10
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; */&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;@RestController&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;@Slf4j&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;OrderNacosController&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;

    &lt;span style=&#34;color:#a6e22e&#34;&gt;@Resource&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; RestTemplate restTemplate&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;

    &lt;span style=&#34;color:#a6e22e&#34;&gt;@Value&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;${service-url.nacos-user-service}&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; String serverUrl&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;

    &lt;span style=&#34;color:#a6e22e&#34;&gt;@GetMapping&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/consumer/payment/nacos/{id}&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; String &lt;span style=&#34;color:#a6e22e&#34;&gt;paymentInfo&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;@PathVariable&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;id&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; Integer id&lt;span style=&#34;color:#f92672&#34;&gt;){&lt;/span&gt;
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; restTemplate&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;getForObject&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;serverUrl &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/payment/nacos/&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; id&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt; String&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;class&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;);&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;启动类&#34;&gt;启动类&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; com.cloud.provider.comsumer&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;

&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.springframework.boot.SpringApplication&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.springframework.boot.autoconfigure.SpringBootApplication&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.springframework.cloud.client.discovery.EnableDiscoveryClient&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;

&lt;span style=&#34;color:#a6e22e&#34;&gt;@SpringBootApplication&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;@EnableDiscoveryClient&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;OrderNacosMain8013&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;String&lt;span style=&#34;color:#f92672&#34;&gt;[]&lt;/span&gt; args&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;
        SpringApplication&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;run&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;OrderNacosMain8013&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;class&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt; args&lt;span style=&#34;color:#f92672&#34;&gt;);&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;测试&#34;&gt;测试&lt;/h2&gt;
&lt;p&gt;运行&lt;code&gt;cloudAlibaba-provider-payment9001&lt;/code&gt;&lt;br&gt;
运行&lt;code&gt;cloudAlibaba-provider-payment9002&lt;/code&gt;&lt;br&gt;
运行&lt;code&gt;cloudalibaba-consumer-nacos-order8013&lt;/code&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Necos</title>
      <link>https://academia-hugo.netlify.com/notes/cloud-albaba/spring-cloud-alibaba-necos/</link>
      <pubDate>Tue, 04 Aug 2020 00:00:00 +0000</pubDate>
      
      <guid>https://academia-hugo.netlify.com/notes/cloud-albaba/spring-cloud-alibaba-necos/</guid>
      <description>&lt;p&gt;&lt;strong&gt;&lt;a href=&#34;https://github.com/alibaba/Nacos&#34;&gt;Nacos&lt;/a&gt;&lt;/strong&gt;：一个更易于构建云原生应用的动态服务发现、配置管理和服务管理平台。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;a href=&#34;https://nacos.io/en-us/docs/quick-start-docker.html&#34;&gt;中文文档&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Nacos安装.</title>
      <link>https://academia-hugo.netlify.com/notes/cloud-albaba/nacos%E5%AE%89%E8%A3%85/</link>
      <pubDate>Tue, 28 Jul 2020 00:00:00 +0100</pubDate>
      
      <guid>https://academia-hugo.netlify.com/notes/cloud-albaba/nacos%E5%AE%89%E8%A3%85/</guid>
      <description>&lt;h2 id=&#34;下载镜像&#34;&gt;下载镜像&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;docker pull nacos/nacos-server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;启动&#34;&gt;启动&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;docker run --env MODE&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;standalone --name nacos -d -p 8848:8848 -v /opt/nacos/conf:/home/nacos/conf nacos/nacos-server:latest
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;使用docker-compose启动&#34;&gt;使用docker-compose启动&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;配置文件&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;docker-compose文件 &lt;code&gt;standalone-derby.yaml&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;version&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#e6db74&#34;&gt;services&lt;/span&gt;:
  &lt;span style=&#34;color:#e6db74&#34;&gt;nacos&lt;/span&gt;:
    &lt;span style=&#34;color:#e6db74&#34;&gt;image&lt;/span&gt;: nacos&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;nacos&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;server&lt;/span&gt;:latest
    &lt;span style=&#34;color:#e6db74&#34;&gt;container_name&lt;/span&gt;: nacos
    &lt;span style=&#34;color:#e6db74&#34;&gt;environment&lt;/span&gt;:
    &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;MODE&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;standalone
    &lt;span style=&#34;color:#e6db74&#34;&gt;volumes&lt;/span&gt;:
    &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;/opt/n&lt;/span&gt;acos&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;logs&lt;/span&gt;:&lt;span style=&#34;color:#e6db74&#34;&gt;/home/n&lt;/span&gt;acos&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;logs
    &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;  &lt;span style=&#34;color:#e6db74&#34;&gt;/opt/n&lt;/span&gt;acos&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;init&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;d&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;custom&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;properties&lt;span style=&#34;color:#e6db74&#34;&gt;:/&lt;/span&gt;home&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;nacos&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;init&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;d&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;custom&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;properties
    &lt;span style=&#34;color:#e6db74&#34;&gt;ports&lt;/span&gt;:
    &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;8848:8848&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;启动&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-css&#34; data-lang=&#34;css&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;docker-compose&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-f&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;standalone-derby&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;yaml&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;up&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;关闭&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-css&#34; data-lang=&#34;css&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;docker-compose&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-f&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;standalone-derby&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;yaml&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;stop&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;移除&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-css&#34; data-lang=&#34;css&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;docker-compose&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-f&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;standalone-derby&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;yaml&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;rm&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;关闭且移除&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-css&#34; data-lang=&#34;css&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;docker-compose&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-f&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;standalone-derby&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;yaml&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;down&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;测试访问&#34;&gt;测试访问&lt;/h2&gt;
&lt;p&gt;直接访问 &lt;a href=&#34;https://links.jianshu.com/go?to=http%3A%2F%2F127.0.0.1%3A8848%2Fnacos&#34;&gt;http://127.0.0.1:8848/nacos&lt;/a&gt;， 使用账号：nacos，密码：nacos 直接登录。nacos是默认账号和密码，登录成功后可以修改密码。&lt;/p&gt;
&lt;p&gt;/home/nacos/conf&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Nacos服务消费者注册</title>
      <link>https://academia-hugo.netlify.com/notes/cloud-albaba/%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E8%80%85%E6%B3%A8%E5%86%8C/</link>
      <pubDate>Tue, 28 Jul 2020 00:00:00 +0100</pubDate>
      
      <guid>https://academia-hugo.netlify.com/notes/cloud-albaba/%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E8%80%85%E6%B3%A8%E5%86%8C/</guid>
      <description>&lt;p&gt;&lt;a href=&#34;https://spring-cloud-alibaba-group.github.io/github-pages/hoxton/en-us/index.html#_spring_cloud_alibaba_nacos_discovery&#34;&gt;&lt;strong&gt;官方文档&lt;/strong&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;新建项目&#34;&gt;新建项目&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;cloudAlibaba-provider-payment9001&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&#34;pom&#34;&gt;pom&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;com.alibaba.cloud&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;yml&#34;&gt;yml&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;server:
  port: 9001

spring:
  application:
    name: nacos-payment-provider
  cloud:
    nacos:
      discovery:
        server-addr: localhost:8848

management:
  endpoints:
    web:
      exposure:
        include: &amp;quot;*&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;启动类&#34;&gt;启动类&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; com.cloud.provider.payment&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.mybatis.spring.annotation.MapperScan&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.springframework.boot.SpringApplication&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.springframework.boot.autoconfigure.SpringBootApplication&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.springframework.cloud.client.discovery.EnableDiscoveryClient&lt;span style=&#34;color:#f92672&#34;&gt;;&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;@SpringBootApplication&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;@EnableDiscoveryClient&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;@MapperScan&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;com.cloud.provider.payment.dao&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PaymentMain9001&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;String&lt;span style=&#34;color:#f92672&#34;&gt;[]&lt;/span&gt; args&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;
        SpringApplication&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;run&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;PaymentMain9001&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;class&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt; args&lt;span style=&#34;color:#f92672&#34;&gt;);&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;测试&#34;&gt;测试&lt;/h2&gt;
&lt;p&gt;运行&lt;code&gt;cloudAlibaba-provider-payment9001&lt;/code&gt;&lt;br&gt;
访问&lt;a href=&#34;http://localhost:8848/nacos&#34;&gt;http://localhost:8848/nacos&lt;/a&gt;&lt;br&gt;
&lt;img src=&#34;https://academia-hugo.netlify.com/img/cloudAlibaba/1.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
